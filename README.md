# æŠ–éŸ³WebåŠ©æ‰‹ (Douyin Web Assistant) v2.0

![UI Screenshot](app/static/img/screenshot.png) <!-- æ‚¨éœ€è¦è‡ªå·±æ·»åŠ ä¸€å¼ UIæˆªå›¾ -->

**æŠ–éŸ³WebåŠ©æ‰‹**æ˜¯ä¸€æ¬¾ç°ä»£åŒ–çš„Webåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨è‡ªåŠ¨åŒ–å¸¸è§çš„æŠ–éŸ³ç½‘é¡µæ“ä½œï¼Œå¦‚æ‰¹é‡ç‚¹èµå’Œè¯„è®ºã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œé€šè¿‡ä¸€ä¸ªç®€æ´ç›´è§‚çš„Webç•Œé¢å’Œä¸€å¥—RESTful APIæ¥æ§åˆ¶åå°çš„Seleniumè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Flask](https://img.shields.io/badge/flask-2.x-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/license-MIT-lightgrey.svg)](https://opensource.org/licenses/MIT)
[![GitHub Repo](https://img.shields.io/badge/github-repo-blue)](https://github.com/zhaotaq/douyin-web-assistant)

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **ç°ä»£åŒ–Webç•Œé¢**: æä¾›ä¸€ä¸ªå¹²å‡€ã€å“åº”å¼çš„å•é¡µåº”ç”¨(SPA)ï¼Œç”¨äºæäº¤Cookieã€å‘èµ·ä»»åŠ¡å’Œå®æ—¶ç›‘æ§ã€‚
*   **æ•°æ®åº“é©±åŠ¨**: é‡‡ç”¨ **SQLite** ä½œä¸ºç»Ÿä¸€æ•°æ®åç«¯ï¼ŒæŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·è´¦æˆ·ã€CookieåŠæ“ä½œæ—¥å¿—ï¼Œå‘Šåˆ«ç¹ççš„æœ¬åœ°æ–‡ä»¶ç®¡ç†ã€‚
*   **RESTful API**: è®¾è®¡æ¸…æ™°çš„APIç«¯ç‚¹ï¼Œä¸¥æ ¼éµå¾ªJSONæ ¼å¼è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæ˜“äºé›†æˆå’ŒäºŒæ¬¡å¼€å‘ã€‚
*   **åå°å¼‚æ­¥ä»»åŠ¡**: è‡ªåŠ¨åŒ–ä»»åŠ¡åœ¨ç‹¬ç«‹çš„åå°çº¿ç¨‹ä¸­è¿è¡Œï¼Œç¡®ä¿APIæœåŠ¡æ— é˜»å¡ï¼Œå¯å¤„ç†è€—æ—¶æ“ä½œã€‚
*   **å®æ—¶çŠ¶æ€ç›‘æ§**: å¯éšæ—¶é€šè¿‡APIæŸ¥è¯¢è‡ªåŠ¨åŒ–ä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€ (`è¿è¡Œä¸­`, `å·²å®Œæˆ`, `å¤±è´¥`, `å¾…å‘½`) å’Œå®æ—¶æ—¥å¿—ã€‚
*   **å…±äº«æ± æœºåˆ¶**: ç”¨æˆ·é€šè¿‡æäº¤CookieåŠ å…¥å…±äº«æ± ï¼Œæ± ä¸­æ‹¥æœ‰å¯ç”¨è´¦æˆ·æ—¶ï¼Œä»»åŠ¡åŠŸèƒ½è‡ªåŠ¨è§£é”ï¼Œé¼“åŠ±åä½œã€‚
*   **æ™ºèƒ½æ“ä½œä¸é£æ§**:
    *   ä»å†…å®¹æ± ä¸­éšæœºé€‰å–è¯„è®ºï¼Œæ¨¡æ‹ŸçœŸäººè¡Œä¸ºã€‚
    *   é€šè¿‡æ•°æ®åº“è®°å½•å·²å¤„ç†è¿‡çš„è§†é¢‘ï¼Œé¿å…é‡å¤æ“ä½œï¼Œé™ä½è´¦æˆ·é£é™©ã€‚
    *   å†…ç½®è¯¦ç»†çš„Cookieè·å–æ•™ç¨‹ï¼Œå¼•å¯¼ç”¨æˆ·å®‰å…¨æ“ä½œã€‚

## ğŸ›ï¸ é¡¹ç›®æ¶æ„

é¡¹ç›®é‡‡ç”¨ç»å…¸çš„ä¸‰å±‚æ¶æ„ï¼Œå®ç°äº†å½»åº•çš„å‰åç«¯åˆ†ç¦»ï¼š

1.  **å‰ç«¯ (Browser)**: ä¸€ä¸ªé™æ€çš„å•é¡µé¢åº”ç”¨ (`app/static/index.html`)ï¼Œä½¿ç”¨åŸç”ŸJavaScript (ES6+)å’Œ`fetch` APIä¸åç«¯é€šä¿¡ã€‚
2.  **åç«¯ (Flask API Server)**: ä¸€ä¸ªPython Flaskåº”ç”¨ï¼Œæä¾›RESTful APIæ¥æ¥æ”¶å‰ç«¯æŒ‡ä»¤ï¼Œå¹¶é€šè¿‡CORSæ”¯æŒè·¨åŸŸè¯·æ±‚ã€‚å®ƒè´Ÿè´£ç®¡ç†åå°ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€‚
3.  **æ•°æ®ä¸æœåŠ¡å±‚ (SQLite & Services)**:
    *   **æ•°æ®åº“**: ä½¿ç”¨SQLite (`database.db`) å­˜å‚¨æ‰€æœ‰æŒä¹…åŒ–æ•°æ®ã€‚
    *   **æœåŠ¡å±‚**: å°è£…äº†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬æ•°æ®åº“äº¤äº’ (`database.py`) å’Œé€šè¿‡Seleniumæ§åˆ¶æµè§ˆå™¨çš„è‡ªåŠ¨åŒ–æ ¸å¿ƒ (`automator.py`)ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
douyin-web-assistant/
â”œâ”€â”€ app/                      # æ ¸å¿ƒåº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ api/                  # APIè“å›¾
â”‚   â”‚   â””â”€â”€ routes.py         # APIè·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ automator.py      # å°è£…Seleniumè‡ªåŠ¨åŒ–é€»è¾‘
â”‚   â”œâ”€â”€ static/               # å‰ç«¯æ–‡ä»¶ (CSS, JS, Images)
â”‚   â”‚   â”œâ”€â”€ css/main.css
â”‚   â”‚   â”œâ”€â”€ js/main.js
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â””â”€â”€ __init__.py           # Flaskåº”ç”¨å·¥å‚
â”œâ”€â”€ database.db               # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ run_db_init.py            # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ database.py               # æ•°æ®åº“äº¤äº’æ¨¡å—
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â”œâ”€â”€ run.py                    # åº”ç”¨å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                 # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

*   å®‰è£… [Python 3.8+](https://www.python.org/downloads/)
*   å®‰è£… [Google Chrome](https://www.google.com/chrome/) æµè§ˆå™¨
*   å®‰è£…ä¸Chromeç‰ˆæœ¬å®Œå…¨åŒ¹é…çš„ [ChromeDriver](https://googlechromelabs.github.io/chrome-for-testing/)ï¼Œå¹¶å°†å…¶è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿ `PATH` ç¯å¢ƒå˜é‡ä¸­ã€‚

### 2. å®‰è£…ä¸é…ç½®

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/zhaotaq/douyin-web-assistant.git
    cd douyin-web-assistant
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    pip install -r requirements.txt
    ```

3.  **åˆå§‹åŒ–æ•°æ®åº“**
    é¦–æ¬¡è¿è¡Œæ—¶ï¼Œéœ€è¦åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ã€‚
    ```bash
    python run_db_init.py
    ```
    è¿™å°†åœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ª `database.db` æ–‡ä»¶ã€‚

### 3. è¿è¡Œ

1.  **å¯åŠ¨åç«¯æœåŠ¡**
    ```bash
    python run.py
    ```
    æœåŠ¡å°†é»˜è®¤åœ¨ `http://127.0.0.1:5000` ä¸Šè¿è¡Œã€‚

2.  **è®¿é—®å‰ç«¯é¡µé¢**
    åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ **`http://127.0.0.1:5000`** å³å¯è®¿é—®Webåº”ç”¨ã€‚

## ğŸ“‹ API æ¥å£è¯´æ˜ (v2.0)

æ‰€æœ‰APIéƒ½ä»¥ `/api` ä¸ºå‰ç¼€ï¼Œå¹¶éµå¾ªç»Ÿä¸€çš„JSONå“åº”æ ¼å¼ã€‚

*   **æˆåŠŸ**: `{"code": 0, "message": "Success", "data": {...}}`
*   **å¤±è´¥**: `{"code": <error_code>, "error": "<error_message>"}`

---

#### `GET /api/accounts`

*   **æè¿°**: è·å–å…±äº«æ± ä¸­æ‰€æœ‰å¯ç”¨è´¦æˆ·çš„æ•°é‡ã€‚
*   **å“åº”**:
    ```json
    {
      "code": 0, "message": "Success",
      "data": { "count": 5 }
    }
    ```

---

#### `POST /api/save_cookie`

*   **æè¿°**: æ¥æ”¶ç”¨æˆ·æäº¤çš„Cookieï¼Œå¹¶å­˜å…¥æ•°æ®åº“ã€‚
*   **è¯·æ±‚ä½“**:
    ```json
    {
      "cookieData": "[{...}]"
    }
    ```

---

#### `GET /api/status`

*   **æè¿°**: è·å–å½“å‰è‡ªåŠ¨åŒ–ä»»åŠ¡çš„çŠ¶æ€å’Œæœ€æ–°æ—¥å¿—ã€‚
*   **å“åº”**:
    ```json
    {
      "code": 0, "message": "Success",
      "data": {
        "status": "idle" | "running" | "completed" | "failed" | "stopped",
        "log": "æœ€æ–°çš„æ—¥å¿—ä¿¡æ¯..."
      }
    }
    ```

---

#### `POST /api/run_task`

*   **æè¿°**: å¯åŠ¨ä¸€ä¸ªæ–°çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚
*   **è¯·æ±‚ä½“**:
    ```json
    {
      "urls": ["https://www.douyin.com/user/..."]
    }
    ```
*   **å“åº” (202 Accepted)**: `{"code": 0, "message": "Task accepted."}`

---

#### `POST /api/stop_task`

*   **æè¿°**: è¯·æ±‚åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ã€‚
*   **å“åº”**: `{"code": 0, "message": "Stop signal sent."}`

## ğŸ¤ å¦‚ä½•è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªæ ‡å‡†çš„GitHub Flowï¼š

1.  ä¸ºæ‚¨çš„åŠŸèƒ½æˆ–ä¿®å¤åœ¨[Issues](https://github.com/zhaotaq/douyin-web-assistant/issues)ä¸­åˆ›å»ºä¸€ä¸ªé—®é¢˜ã€‚
2.  ä» `main` åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹æ€§åˆ†æ”¯ (`feature/<issue_no>-description`)ã€‚
3.  å®Œæˆå¼€å‘å’Œæµ‹è¯•åï¼Œæäº¤ä¸€ä¸ªPull Requeståˆ° `main` åˆ†æ”¯ã€‚
4.  ç¡®ä¿æ‚¨çš„ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒï¼Œå¹¶é€šè¿‡æ‰€æœ‰æµ‹è¯•ã€‚

## ğŸ“„ License

è¯¥é¡¹ç›®æ ¹æ® [MIT License](LICENSE) æˆæƒã€‚