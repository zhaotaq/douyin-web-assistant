# 🤖 全自动抖音管理器使用说明

## 🎯 功能概述

这是一个全自动化的抖音点赞评论系统，支持：
- **多账户轮流工作**，每个账户独立处理视频记录
- 批量处理多个主页
- **智能账户分离**：每个账户都能处理相同视频，但不会重复处理
- 智能评论检测，避免重复评论
- 随机等待时间，模拟真实用户行为

## 📁 文件结构

```
📦 项目目录
├── 🐍 auto_manager.py        # 全自动管理器主程序
├── 📝 homepage_urls.txt      # 主页地址库
├── 📁 processed_videos/      # 已处理视频记录目录
│   ├── 账户A_processed.txt   # 账户A的已处理记录
│   ├── 账户B_processed.txt   # 账户B的已处理记录
│   └── ...                   # 其他账户的记录
├── 💬 comments_pool.txt      # 评论内容库
├── 📚 account_manager.py     # 账户管理器
└── 📖 README_AUTO.md         # 本说明文档
```

## 🚀 使用步骤

### 1. 准备工作

#### 1.1 添加账户
```bash
python account_manager.py
```
选择"2. 添加新账户"，添加至少2个抖音账户

#### 1.2 配置主页地址库
编辑 `homepage_urls.txt` 文件，添加要处理的抖音用户主页：

```txt
# 示例：
https://www.douyin.com/user/MS4wLjABAAAA用户ID1
https://www.douyin.com/user/MS4wLjABAAAA用户ID2
https://www.douyin.com/user/MS4wLjABAAAA用户ID3
```

#### 1.3 配置评论库
编辑 `comments_pool.txt` 文件，添加评论内容：

```txt
太棒了！
支持一下！
好视频！
点赞支持！
内容很精彩
学到了很多
继续加油
```

### 2. 启动自动化

```bash
python auto_manager.py
```

### 3. 功能菜单

```
=== 🤖 全自动抖音管理器 ===
1. 查看配置状态                    # 查看账户、主页、已处理视频数量
2. 管理主页地址库                  # 编辑主页地址
3. 管理评论库                      # 编辑评论内容
4. 查看已处理视频                  # 查看处理历史总览
5. 开始自动化运行                  # 无限循环运行
6. 开始自动化运行（限制循环次数）    # 指定循环次数
7. 清空已处理视频记录              # 重置处理历史
8. 查看各账户处理状态              # 📊 NEW! 查看每个账户的详细状态
0. 退出
```

## 🔄 工作流程

### 自动化循环流程：

```
🔄 循环开始
├── 📍 主页1
│   ├── 👤 账户A → 检查A的记录 → 处理未处理视频 → 更新A的记录
│   ├── 👤 账户B → 检查B的记录 → 处理未处理视频 → 更新B的记录  
│   └── ⏳ 账户间等待 10-30秒
├── 📍 主页2  
│   ├── 👤 账户A → 检查A的记录 → 处理未处理视频 → 更新A的记录
│   ├── 👤 账户B → 检查B的记录 → 处理未处理视频 → 更新B的记录
│   └── ⏳ 主页间等待 30-60秒
└── ⏳ 循环间隔等待 5-10分钟
```

### 🔥 **核心特性：账户分离**

**每个账户都能处理相同的视频，但不会重复处理：**

```
📹 视频1: "精彩内容"
├── 👤 账户A: ✅ 点赞 + 评论 → 记录到 账户A_processed.txt
├── 👤 账户B: ✅ 点赞 + 评论 → 记录到 账户B_processed.txt
└── 👤 账户C: ✅ 点赞 + 评论 → 记录到 账户C_processed.txt

下次运行时：
├── 👤 账户A: ❌ 已处理，跳过
├── 👤 账户B: ❌ 已处理，跳过
└── 👤 账户C: ❌ 已处理，跳过
```

### 智能去重机制：

1. **账户级视频去重**：每个账户不会重复处理同一视频
2. **评论去重**：通过头像匹配检测是否已评论
3. **点赞去重**：检测点赞状态，避免重复点赞

## ⚙️ 配置选项

### 等待时间设置（可在代码中调整）：

```python
# 视频间等待时间
wait_time = random.randint(3, 8)  # 3-8秒

# 账户切换等待时间  
wait_time = random.randint(10, 30)  # 10-30秒

# 主页切换等待时间
wait_time = random.randint(30, 60)  # 30-60秒

# 循环间隔等待时间
wait_time = random.randint(300, 600)  # 5-10分钟
```

### 滚动设置：

```python
# 主页滚动次数（加载更多视频）
scroll_attempts = 5

# 评论区滚动次数（检测重复评论）
for i in range(3):
    await page.keyboard.press('PageDown')
```

## 📊 运行状态监控

程序运行时会显示详细的状态信息：

```
🔄 第 1 轮循环开始

📍 处理主页 1/2: https://www.douyin.com/user/xxx

👤 使用账户 1/2: 账户A
📝 该账户已处理视频数量: 0
🔄 账户【账户A】开始处理主页: https://www.douyin.com/user/xxx
  📜 滚动页面 (1/5)...
  📊 找到 15 个视频，其中 15 个未被当前账户处理

  🎯 处理视频 1/15: 视频标题...
    链接: https://www.douyin.com/video/xxx
    👍 尝试点赞...
    ✅ 点赞成功
    💬 检查评论状态...
    💬 发表新评论...
    ✅ 评论成功: 太棒了！
    ⏳ 等待 5 秒...

👤 使用账户 2/2: 账户B  
📝 该账户已处理视频数量: 0
🔄 账户【账户B】开始处理主页: https://www.douyin.com/user/xxx
  📊 找到 15 个视频，其中 15 个未被当前账户处理
  (账户B会处理相同的视频，因为它有独立的记录)
```

## 🛡️ 安全特性

1. **随机等待**：模拟真实用户行为
2. **账户分离**：避免全局重复检测异常
3. **重复检测**：避免重复操作被发现
4. **验证码处理**：自动暂停等待手动处理
5. **错误恢复**：单个视频失败不影响整体流程
6. **优雅停止**：Ctrl+C 安全停止

## 🔧 故障排除

### 常见问题：

1. **没有找到视频**
   - 检查主页链接是否正确
   - 确认页面结构是否发生变化

2. **无法点赞/评论**
   - 检查账户是否正常登录
   - 确认没有被限制操作

3. **重复评论问题**
   - 检查头像匹配逻辑
   - 确认评论区滚动是否正常

4. **账户记录混乱**
   - 使用选项8查看各账户状态
   - 必要时清空重置记录

### 调试模式：

设置 `headless=True` 可以隐藏浏览器窗口：

```python
browser = await p.chromium.launch(headless=True)  # 后台运行
```

## 📈 性能优化建议

1. **合理设置循环次数**：避免长时间连续运行
2. **增加等待时间**：降低被检测风险
3. **定期清理记录**：使用选项7清空记录重新开始
4. **监控账户状态**：使用选项8查看各账户处理情况

## ⚠️ 注意事项

1. 请遵守抖音的使用条款和社区规范
2. 适度使用，避免被平台检测为异常行为
3. 定期检查账户状态，确保正常运行
4. 备份重要配置文件
5. 请勿用于恶意刷量或其他违规行为

## 🆘 技术支持

如有问题，请检查：
1. Python环境是否正确安装
2. 依赖库是否完整（playwright等）
3. 网络连接是否正常
4. 抖音页面结构是否发生变化

## 🎯 使用场景示例

### 场景1：多账户同时为UP主助力
```
目标：让3个账户都为某个UP主的视频点赞评论

配置：
- homepage_urls.txt 添加UP主链接
- 3个账户轮流处理
- 每个账户都会处理所有视频

结果：每个视频获得3个点赞+3条评论
```

### 场景2：持续关注多个UP主
```
目标：定期为多个关注的UP主点赞评论

配置：
- homepage_urls.txt 添加多个UP主链接  
- 设置循环运行
- 每轮循环间隔5-10分钟

结果：持续为新发布的视频点赞评论
``` 